<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title> Dev notes &middot; Dev notes </title>

  
  <link rel="stylesheet" href="http://localhost:1313/css/poole.css">
  <link rel="stylesheet" href="http://localhost:1313/css/syntax.css">
  <link rel="stylesheet" href="http://localhost:1313/css/hyde.css">
  <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">

  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/favicon.ico">

  
  <link href="http://localhost:1313/index.xml" rel="alternate" type="application/rss+xml" title="Dev notes" />
</head>

<body>

<div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <h1>Dev notes</h1>
      <p class="lead">
      An elegant open source and mobile first theme for <a href="http://hugo.spf13.com">hugo</a> made by <a href="http://twitter.com/mdo">@mdo</a>. Originally made for Jekyll.
      </p>
    </div>

    <ul class="sidebar-nav">
      <li><a href="/">Home</a> </li>
      
    </ul>

    <p>&copy; 2014. All rights reserved. </p>
  </div>
</div>


    <div class="content container">
<div class="posts">

      
  <div class="post">
    <h1 class="post-title">
      <a href="http://localhost:1313/posts/orientation_change">
        Подводные камни смены ориентации
      </a>
    </h1>

    <span class="post-date">Sat, Aug 2, 2014</span>

    <p>Основная мысль, которую я вынес после нескольких дней отладки приложения: смена ориентации (rotation, orientation change) - это очень непростая вещь! Она дает просто массу способов выстрелисть себе в ногу. Наконец-то я понял, тех разработчиков, которые просто запрещают смену ориентации в своем софте.</p>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="http://localhost:1313/posts/memory-leaks">
        Memory leaks
      </a>
    </h1>

    <span class="post-date">Fri, Aug 1, 2014</span>

    <p>StackOverflow discussions mostly:</p>

<ul>
<li><a href="http://geekple.com/blogs/feeds/9AlMn/posts/354891570708736">TextView with id and textIsSelectable=&ldquo;true&rdquo; causes leaking of the Activity object</a>. And corresponding <a href="http://stackoverflow.com/questions/22990634/textview-with-id-and-textisselectable-true-causes-leaking-of-the-activity-obje">Stack Overflow topic</a>. I&rsquo;ve bumped into this issue personally and spent a quite some time too. Rotating emulator and heapdumping mostly :) The point is that TextView with id and android:textIsSelectable=&ldquo;true&rdquo; causes memory leak on Android 4.0.x, 4.1.x, 4.2.x, 4.3.x. Can&rsquo;t check it on 4.4.2 because of <a href="https://code.google.com/p/android/issues/detail?id=61671">emulator bug</a>.</li>
<li><a href="http://stackoverflow.com/questions/18348049/android-edittext-memory-leak">Android EditText Memory Leak</a>, <a href="http://stackoverflow.com/questions/8497965/why-does-edittext-retain-its-activitys-context-in-ice-cream-sandwich">Why does EditText retain its Activity&rsquo;s Context in Ice Cream Sandwich</a>, <a href="http://stackoverflow.com/questions/14069501/edittext-causing-memory-leak">EditText causing memory leak</a>. The main theme of this topics is that EditText leaks when spellchecker suggestions are used. You can turn it off but it can help or maybe not. EditText is leaking on Android 4.0.x, 4.1.x, 4.2.x. Thanks god, seems like it&rsquo;s fixed in Android 4.3, API 18 (checked on Nexus 7 2013 emulator). Although <a href="https://code.google.com/p/android/issues/detail?id=60930">corresponding issue</a> is still open.</li>
<li><a href="http://stackoverflow.com/a/18414294">Fragments are not being released from memory</a>. A valuable advice - use weak references to point to any object that references its context outside of your Activity. I&rsquo;m not sure is it a proper approach to weak referencing ViewPager, but for some more &ldquo;distant&rdquo; object like <a href="http://www.michenux.net/android-asynctask-in-fragment-best-pratices-725.html">AsyncTask</a> it might be reasonable.</li>
</ul>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="http://localhost:1313/posts/multi-pane">
        Multi-pane layout for tablets
      </a>
    </h1>

    <span class="post-date">Wed, Jul 30, 2014</span>

    <p>Some articles:</p>

<ul>
<li><a href="http://commonsware.com/blog/2012/08/20/multiple-view-viewpager-options.html">Multiple-View ViewPager Options</a>. It&rsquo;s a brilliant set of methods to display several fragments simultaneously using ViewPager. I&rsquo;ve personally used first method (overriding getPageWidth() in PagerAdapter) - it works for me.</li>
<li><a href="http://shashikawlp.wordpress.com/2012/12/13/android-viewpager-with-multiple-views/">Android ViewPager with Multiple Views</a>. Looks like third method from previous article.</li>
</ul>

<p>And StackOverflow discussions:</p>

<ul>
<li><a href="http://stackoverflow.com/questions/9468581/can-viewpager-have-multiple-views-in-per-page">Can ViewPager have multiple views in per page?</a>. There are links to CommonsWare article and description of method used for some Dutch newspaper app. Looks nice but it display one full page and part of another - it&rsquo;s not what I need now.</li>
<li><a href="http://stackoverflow.com/questions/23149850/viewpager-with-different-adapters-for-portrait-and-landscape">ViewPager with different adapters for portrait and landscape</a>. Dude wants to show A,B,C fragments in portrait mode and A,C only in landscape. Not my case but interesting.</li>
<li><a href="http://stackoverflow.com/questions/6465680/how-to-determine-the-screen-width-in-terms-of-dp-or-dip-at-runtime-in-android">How to determine the screen width in terms of dp or dip at runtime in Android?</a>. Describe how to calculate screen size in &ldquo;density-independent pixels&rdquo;. It&rsquo;s useful for decide when which layout to use programmatically.</li>
</ul>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="http://localhost:1313/posts/headless-fragments">
        Retaining state with headless fragments
      </a>
    </h1>

    <span class="post-date">Tue, Jul 29, 2014</span>

    <p>Some articles:</p>

<ul>
<li>Official <a href="http://developer.android.com/guide/components/fragments.html">Fragments guide</a>. Has some clues for headless fragments (see &ldquo;Adding a fragment without a UI&rdquo;).</li>
<li>Superb <a href="http://www.vogella.com/tutorials/AndroidFragments/article.html">multi-pane fragments tutorial</a> from Lars Vogel. Contains some tips for <a href="http://www.vogella.com/tutorials/AndroidFragments/article.html#headlessfragments">headless fragments</a>.</li>
<li><a href="http://techbandhu.wordpress.com/2013/07/02/android-headless-fragment/">Android best tip to work with fragments and orientation change</a>. More detailed headless fragments technique description.</li>
<li>Headless fragment example - <a href="https://android.googlesource.com/platform/development/+/master/samples/ApiDemos/src/com/example/android/apis/app/FragmentRetainInstance.java">FragmentRetainInstance.java</a>. In this code headless fragment is created from other fragment. In my case it&rsquo;s inappropriate because of Robolectric testing (recursive fragment transactions).</li>
<li><a href="http://www.intertech.com/Blog/saving-and-retrieving-android-instance-state-part-2/">Saving (And Retrieving) Android Instance State – Part 2</a>. Details about retained fragments. Neat retained fragment lifecycle.</li>
<li><a href="http://www.androiddesignpatterns.com/2013/04/retaining-objects-across-config-changes.html">Handling Configuration Changes with Fragments</a>. Main advice - Manage the Object Inside a Retained Fragment.</li>
<li><a href="http://ideaventure.blogspot.com.au/2014/01/android-activityfragment-life-cycle.html">Android Activity/Fragment life cycle analysis</a>. Full logging of all lifecycle method calls in different situations.</li>
</ul>

<p>And StackOverflow discussions:</p>

<ul>
<li><a href="http://stackoverflow.com/questions/11591302/unable-to-use-fragment-setretaininstance-as-a-replacement-for-activity-onretai">Unable to use Fragment.setRetainInstance() as a replacement for Activity.onRetainNonConfigurationInstance()</a>. How to preserve fragments with WebViews and AsyncTasks. One of the answers is to override Fragment.onDestroy() and save asynctasks to Application object.</li>
<li><a href="http://stackoverflow.com/questions/12640316/further-understanding-setretaininstancetrue">Further understanding setRetainInstance(true)</a>. Retained fragment lifecycle logs.</li>
<li><a href="http://stackoverflow.com/questions/8417885/android-fragments-retaining-an-asynctask-during-screen-rotation-or-configuratio">Android Fragments. Retaining an AsyncTask during screen rotation or configuration change</a>. Retained fragment with inner asynctask example and much more. AsyncTask has reference to fragment - it&rsquo;s interesting.</li>
</ul>

  </div>
  
</div>


  <script>document.write('<script src="http://'
        + (location.host || 'localhost').split(':')[0]
		+ ':1313/livereload.js?mindelay=10"></'
        + 'script>')</script></body>
</html>
